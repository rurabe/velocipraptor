'use strict';
var dbm = global.dbm || require('db-migrate');
var type = dbm.dataType;

var DATA = [
  {"range" : "5.78.96.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "8.4.60.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "8.4.61.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "8.4.62.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "8.4.63.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "23.226.32.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "23.226.208.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "23.239.168.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "37.148.188.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "45.59.72.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "45.62.176.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "46.244.96.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "63.141.60.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "63.209.224.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "63.223.80.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "63.223.87.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "63.223.88.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "63.223.90.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "66.79.96.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "66.147.178.0/23", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "66.187.172.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.193.12.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.195.196.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.242.0.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.242.1.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.242.10.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.242.11.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "66.254.188.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "67.159.224.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "67.219.216.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "67.219.220.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "68.169.22.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "68.169.23.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "68.169.24.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "68.169.25.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "69.64.24.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "69.87.208.0/21", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "74.126.160.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "81.24.4.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "85.203.20.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "89.167.201.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "89.167.202.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "89.167.203.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "96.126.64.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "96.126.84.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "104.143.64.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "104.193.148.0/22", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "104.244.8.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "104.245.188.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "104.255.136.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "107.155.252.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "115.69.160.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "130.93.32.0/20", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "130.185.172.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "138.128.224.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "144.208.128.0/21", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "149.114.0.0/22", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "158.58.64.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "162.210.172.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "162.210.174.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "162.218.242.0/23", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "162.218.244.0/23", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "162.219.124.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "162.245.88.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "162.251.0.0/22", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "162.252.181.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "162.252.182.0/23", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "162.255.208.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "166.90.186.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "172.103.64.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "173.0.158.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "173.195.152.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "181.41.0.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "185.10.164.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "185.21.104.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "185.51.52.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "185.59.76.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "185.92.24.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "190.102.96.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "190.124.44.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.44.254.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.74.134.0/23", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "192.112.200.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "192.124.38.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.154.216.0/21", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "192.161.250.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "192.161.251.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "192.161.252.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "192.161.255.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "192.241.9.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.241.10.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.241.11.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "192.241.12.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "193.201.224.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "195.5.160.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "196.54.7.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "196.54.11.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "196.54.26.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "196.54.28.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "196.54.76.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "196.54.88.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "196.54.94.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "196.54.132.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "197.238.224.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "198.55.16.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "198.59.101.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.103.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.105.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.113.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.123.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.126.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.127.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.59.185.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.99.131.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.99.132.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "198.178.243.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "199.16.52.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "199.58.248.0/21", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "199.254.180.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "204.18.16.0/20", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "204.27.194.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "204.134.97.0/24", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "204.137.98.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "204.137.99.0/24", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "204.239.214.0/23", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "206.40.160.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "207.66.31.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "207.66.106.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "207.66.109.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "207.66.124.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "207.182.64.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "207.188.191.0/24", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "208.71.180.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "208.72.224.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "208.81.56.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "208.84.88.0/21", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "208.117.88.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "208.123.112.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "209.113.128.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "209.136.202.0/23", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "209.136.204.0/23", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "209.182.208.0/21", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "209.222.252.0/22", "datacenter_name" : "Level 3", "datacenter_location" : "Ashburn"},
  {"range" : "212.124.92.0/22", "datacenter_name" : null, "datacenter_location" : null},
  {"range" : "216.21.8.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "216.41.48.0/22", "datacenter_name" : "Colo@", "datacenter_location" : "Phoenix"},
  {"range" : "216.162.205.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "216.162.208.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "216.162.211.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "216.162.218.0/24", "datacenter_name" : "Internap", "datacenter_location" : "Ashburn"},
  {"range" : "216.211.144.0/20", "datacenter_name" : null, "datacenter_location" : null},
];

var insertRanges = function(ranges){
  var values = ranges.map(function(r){
    if(r.datacenter_name){
      return `('${r.range}',(select id from datacenters where datacenters.name = '${r.datacenter_name}' and datacenters.location = '${r.datacenter_location}'),now(),now())`
    } else {
      return `('${r.range}',null,now(),now())`
    }
  }).join(",");
  return "INSERT INTO ranges(ips,datacenter_id,created_at,updated_at) VALUES "+values+";";
}

exports.up = function(db, callback) {
  db.runSql(insertRanges(DATA),callback);
};

exports.down = function(db, callback) {
  db.runSql("DELETE from addresses; DELETE from ranges;",callback)
};
