'use strict';

var dbm = global.dbm || require('db-migrate');
var type = dbm.dataType;

var DATA = [
  '104.193.148.100,255.255.252.0',
  '104.193.148.102,255.255.252.0',
  '104.193.148.104,255.255.252.0',
  '104.193.148.106,255.255.252.0',
  '104.193.148.108,255.255.252.0',
  '104.193.148.111,255.255.252.0',
  '104.193.148.66,255.255.252.0',
  '104.193.148.69,255.255.252.0',
  '104.193.148.71,255.255.252.0',
  '104.193.148.73,255.255.252.0',
  '104.193.148.76,255.255.252.0',
  '104.193.148.79,255.255.252.0',
  '104.193.148.82,255.255.252.0',
  '104.193.148.84,255.255.252.0',
  '104.193.148.87,255.255.252.0',
  '104.193.148.89,255.255.252.0',
  '104.193.148.92,255.255.252.0',
  '104.193.148.95,255.255.252.0',
  '104.193.148.97,255.255.252.0',
  '104.193.149.113,255.255.252.0',
  '104.193.149.116,255.255.252.0',
  '104.193.149.118,255.255.252.0',
  '104.193.149.121,255.255.252.0',
  '104.193.149.124,255.255.252.0',
  '104.193.149.126,255.255.252.0',
  '104.193.149.129,255.255.252.0',
  '104.193.149.132,255.255.252.0',
  '104.193.149.134,255.255.252.0',
  '104.193.149.137,255.255.252.0',
  '104.193.149.139,255.255.252.0',
  '104.193.149.142,255.255.252.0',
  '104.193.149.145,255.255.252.0',
  '104.193.149.147,255.255.252.0',
  '104.193.149.149,255.255.252.0',
  '104.193.149.151,255.255.252.0',
  '104.193.149.153,255.255.252.0',
  '104.193.149.156,255.255.252.0',
  '104.193.149.158,255.255.252.0',
  '104.193.150.160,255.255.252.0',
  '104.193.150.162,255.255.252.0',
  '104.193.150.165,255.255.252.0',
  '104.193.150.168,255.255.252.0',
  '104.193.150.171,255.255.252.0',
  '104.193.150.173,255.255.252.0',
  '104.193.150.176,255.255.252.0',
  '104.193.150.179,255.255.252.0',
  '104.193.150.181,255.255.252.0',
  '104.193.150.183,255.255.252.0',
  '104.193.150.186,255.255.252.0',
  '104.193.150.189,255.255.252.0',
  '104.193.150.192,255.255.252.0',
  '104.193.150.194,255.255.252.0',
  '104.193.150.197,255.255.252.0',
  '104.193.150.199,255.255.252.0',
  '104.193.150.201,255.255.252.0',
  '104.193.150.203,255.255.252.0',
  '104.193.150.206,255.255.252.0',
  '104.193.151.209,255.255.252.0',
  '104.193.151.212,255.255.252.0',
  '104.193.151.215,255.255.252.0',
  '104.193.151.218,255.255.252.0',
  '104.193.151.221,255.255.252.0',
  '104.193.151.224,255.255.252.0',
  '104.193.151.226,255.255.252.0',
  '104.193.151.228,255.255.252.0',
  '104.193.151.230,255.255.252.0',
  '104.193.151.233,255.255.252.0',
  '104.193.151.235,255.255.252.0',
  '104.193.151.238,255.255.252.0',
  '104.193.151.240,255.255.252.0',
  '104.193.151.242,255.255.252.0',
  '104.193.151.244,255.255.252.0',
  '104.193.151.246,255.255.252.0',
  '104.193.151.248,255.255.252.0',
  '104.193.151.251,255.255.252.0',
  '104.193.151.253,255.255.252.0',
  '149.114.0.102,255.255.252.0',
  '149.114.0.104,255.255.252.0',
  '149.114.0.107,255.255.252.0',
  '149.114.0.109,255.255.252.0',
  '149.114.0.65,255.255.252.0',
  '149.114.0.67,255.255.252.0',
  '149.114.0.70,255.255.252.0',
  '149.114.0.72,255.255.252.0',
  '149.114.0.75,255.255.252.0',
  '149.114.0.77,255.255.252.0',
  '149.114.0.80,255.255.252.0',
  '149.114.0.82,255.255.252.0',
  '149.114.0.85,255.255.252.0',
  '149.114.0.87,255.255.252.0',
  '149.114.0.90,255.255.252.0',
  '149.114.0.92,255.255.252.0',
  '149.114.0.95,255.255.252.0',
  '149.114.0.97,255.255.252.0',
  '149.114.0.99,255.255.252.0',
  '149.114.1.112,255.255.252.0',
  '149.114.1.114,255.255.252.0',
  '149.114.1.117,255.255.252.0',
  '149.114.1.119,255.255.252.0',
  '149.114.1.122,255.255.252.0',
  '149.114.1.124,255.255.252.0',
  '149.114.1.127,255.255.252.0',
  '149.114.1.129,255.255.252.0',
  '149.114.1.132,255.255.252.0',
  '149.114.1.134,255.255.252.0',
  '149.114.1.137,255.255.252.0',
  '149.114.1.139,255.255.252.0',
  '149.114.1.141,255.255.252.0',
  '149.114.1.144,255.255.252.0',
  '149.114.1.146,255.255.252.0',
  '149.114.1.149,255.255.252.0',
  '149.114.1.151,255.255.252.0',
  '149.114.1.154,255.255.252.0',
  '149.114.1.156,255.255.252.0',
  '149.114.2.155,255.255.252.0',
  '149.114.2.157,255.255.252.0',
  '149.114.2.160,255.255.252.0',
  '149.114.2.162,255.255.252.0',
  '149.114.2.165,255.255.252.0',
  '149.114.2.167,255.255.252.0',
  '149.114.2.170,255.255.252.0',
  '149.114.2.172,255.255.252.0',
  '149.114.2.175,255.255.252.0',
  '149.114.2.177,255.255.252.0',
  '149.114.2.180,255.255.252.0',
  '149.114.2.182,255.255.252.0',
  '149.114.2.185,255.255.252.0',
  '149.114.2.187,255.255.252.0',
  '149.114.2.190,255.255.252.0',
  '149.114.2.192,255.255.252.0',
  '149.114.2.195,255.255.252.0',
  '149.114.2.197,255.255.252.0',
  '149.114.2.200,255.255.252.0',
  '149.114.3.202,255.255.252.0',
  '149.114.3.204,255.255.252.0',
  '149.114.3.207,255.255.252.0',
  '149.114.3.209,255.255.252.0',
  '149.114.3.212,255.255.252.0',
  '149.114.3.214,255.255.252.0',
  '149.114.3.217,255.255.252.0',
  '149.114.3.219,255.255.252.0',
  '149.114.3.222,255.255.252.0',
  '149.114.3.224,255.255.252.0',
  '149.114.3.227,255.255.252.0',
  '149.114.3.229,255.255.252.0',
  '149.114.3.232,255.255.252.0',
  '149.114.3.234,255.255.252.0',
  '149.114.3.237,255.255.252.0',
  '149.114.3.239,255.255.252.0',
  '149.114.3.242,255.255.252.0',
  '149.114.3.244,255.255.252.0',
  '149.114.3.247,255.255.252.0',
  '162.210.172.100,255.255.255.0',
  '162.210.172.102,255.255.255.0',
  '162.210.172.104,255.255.255.0',
  '162.210.172.106,255.255.255.0',
  '162.210.172.108,255.255.255.0',
  '162.210.172.111,255.255.255.0',
  '162.210.172.66,255.255.255.0',
  '162.210.172.69,255.255.255.0',
  '162.210.172.71,255.255.255.0',
  '162.210.172.73,255.255.255.0',
  '162.210.172.76,255.255.255.0',
  '162.210.172.79,255.255.255.0',
  '162.210.172.82,255.255.255.0',
  '162.210.172.84,255.255.255.0',
  '162.210.172.87,255.255.255.0',
  '162.210.172.89,255.255.255.0',
  '162.210.172.92,255.255.255.0',
  '162.210.172.95,255.255.255.0',
  '162.210.172.97,255.255.255.0',
  '162.210.174.113,255.255.255.0',
  '162.210.174.116,255.255.255.0',
  '162.210.174.118,255.255.255.0',
  '162.210.174.121,255.255.255.0',
  '162.210.174.124,255.255.255.0',
  '162.210.174.126,255.255.255.0',
  '162.210.174.129,255.255.255.0',
  '162.210.174.132,255.255.255.0',
  '162.210.174.134,255.255.255.0',
  '162.210.174.137,255.255.255.0',
  '162.210.174.139,255.255.255.0',
  '162.210.174.142,255.255.255.0',
  '162.210.174.145,255.255.255.0',
  '162.210.174.147,255.255.255.0',
  '162.210.174.149,255.255.255.0',
  '162.210.174.151,255.255.255.0',
  '162.210.174.153,255.255.255.0',
  '162.210.174.156,255.255.255.0',
  '162.210.174.158,255.255.255.0',
  '162.251.0.160,255.255.252.0',
  '162.251.0.162,255.255.252.0',
  '162.251.0.165,255.255.252.0',
  '162.251.0.168,255.255.252.0',
  '162.251.0.171,255.255.252.0',
  '162.251.0.173,255.255.252.0',
  '162.251.0.176,255.255.252.0',
  '162.251.0.179,255.255.252.0',
  '162.251.0.181,255.255.252.0',
  '162.251.0.183,255.255.252.0',
  '162.251.0.186,255.255.252.0',
  '162.251.0.189,255.255.252.0',
  '162.251.0.192,255.255.252.0',
  '162.251.0.194,255.255.252.0',
  '162.251.0.197,255.255.252.0',
  '162.251.0.199,255.255.252.0',
  '162.251.0.201,255.255.252.0',
  '162.251.0.203,255.255.252.0',
  '162.251.0.206,255.255.252.0',
  '162.251.1.209,255.255.252.0',
  '162.251.1.212,255.255.252.0',
  '162.251.1.215,255.255.252.0',
  '162.251.1.218,255.255.252.0',
  '162.251.1.221,255.255.252.0',
  '162.251.1.224,255.255.252.0',
  '162.251.1.226,255.255.252.0',
  '162.251.1.228,255.255.252.0',
  '162.251.1.230,255.255.252.0',
  '162.251.1.233,255.255.252.0',
  '162.251.1.235,255.255.252.0',
  '162.251.1.238,255.255.252.0',
  '162.251.1.240,255.255.252.0',
  '162.251.1.242,255.255.252.0',
  '162.251.1.244,255.255.252.0',
  '162.251.1.246,255.255.252.0',
  '162.251.1.248,255.255.252.0',
  '162.251.1.251,255.255.252.0',
  '162.251.1.253,255.255.252.0',
  '162.251.2.100,255.255.252.0',
  '162.251.2.102,255.255.252.0',
  '162.251.2.104,255.255.252.0',
  '162.251.2.106,255.255.252.0',
  '162.251.2.108,255.255.252.0',
  '162.251.2.111,255.255.252.0',
  '162.251.2.66,255.255.252.0',
  '162.251.2.69,255.255.252.0',
  '162.251.2.71,255.255.252.0',
  '162.251.2.73,255.255.252.0',
  '162.251.2.76,255.255.252.0',
  '162.251.2.79,255.255.252.0',
  '162.251.2.82,255.255.252.0',
  '162.251.2.84,255.255.252.0',
  '162.251.2.87,255.255.252.0',
  '162.251.2.89,255.255.252.0',
  '162.251.2.92,255.255.252.0',
  '162.251.2.95,255.255.252.0',
  '162.251.2.97,255.255.252.0',
  '162.251.3.113,255.255.252.0',
  '162.251.3.116,255.255.252.0',
  '162.251.3.118,255.255.252.0',
  '162.251.3.121,255.255.252.0',
  '162.251.3.124,255.255.252.0',
  '162.251.3.126,255.255.252.0',
  '162.251.3.129,255.255.252.0',
  '162.251.3.132,255.255.252.0',
  '162.251.3.134,255.255.252.0',
  '162.251.3.137,255.255.252.0',
  '162.251.3.139,255.255.252.0',
  '162.251.3.142,255.255.252.0',
  '162.251.3.145,255.255.252.0',
  '162.251.3.147,255.255.252.0',
  '162.251.3.149,255.255.252.0',
  '162.251.3.151,255.255.252.0',
  '162.251.3.153,255.255.252.0',
  '162.251.3.156,255.255.252.0',
  '162.251.3.158,255.255.252.0',
  '192.74.134.160,255.255.254.0',
  '192.74.134.162,255.255.254.0',
  '192.74.134.165,255.255.254.0',
  '192.74.134.168,255.255.254.0',
  '192.74.134.171,255.255.254.0',
  '192.74.134.173,255.255.254.0',
  '192.74.134.176,255.255.254.0',
  '192.74.134.179,255.255.254.0',
  '192.74.134.181,255.255.254.0',
  '192.74.134.183,255.255.254.0',
  '192.74.134.186,255.255.254.0',
  '192.74.134.189,255.255.254.0',
  '192.74.134.192,255.255.254.0',
  '192.74.134.194,255.255.254.0',
  '192.74.134.197,255.255.254.0',
  '192.74.134.199,255.255.254.0',
  '192.74.134.201,255.255.254.0',
  '192.74.134.203,255.255.254.0',
  '192.74.134.206,255.255.254.0',
  '192.74.135.209,255.255.254.0',
  '192.74.135.212,255.255.254.0',
  '192.74.135.215,255.255.254.0',
  '192.74.135.218,255.255.254.0',
  '192.74.135.221,255.255.254.0',
  '192.74.135.224,255.255.254.0',
  '192.74.135.226,255.255.254.0',
  '192.74.135.228,255.255.254.0',
  '192.74.135.230,255.255.254.0',
  '192.74.135.233,255.255.254.0',
  '192.74.135.235,255.255.254.0',
  '192.74.135.238,255.255.254.0',
  '192.74.135.240,255.255.254.0',
  '192.74.135.242,255.255.254.0',
  '192.74.135.244,255.255.254.0',
  '192.74.135.246,255.255.254.0',
  '192.74.135.248,255.255.254.0',
  '192.74.135.251,255.255.254.0',
  '192.74.135.253,255.255.254.0',
  '216.162.205.100,255.255.255.0',
  '216.162.205.102,255.255.255.0',
  '216.162.205.104,255.255.255.0',
  '216.162.205.106,255.255.255.0',
  '216.162.205.108,255.255.255.0',
  '216.162.205.111,255.255.255.0',
  '216.162.205.66,255.255.255.0',
  '216.162.205.69,255.255.255.0',
  '216.162.205.71,255.255.255.0',
  '216.162.205.73,255.255.255.0',
  '216.162.205.76,255.255.255.0',
  '216.162.205.79,255.255.255.0',
  '216.162.205.82,255.255.255.0',
  '216.162.205.84,255.255.255.0',
  '216.162.205.87,255.255.255.0',
  '216.162.205.89,255.255.255.0',
  '216.162.205.92,255.255.255.0',
  '216.162.205.95,255.255.255.0',
  '216.162.205.97,255.255.255.0',
  '216.162.208.113,255.255.255.0',
  '216.162.208.116,255.255.255.0',
  '216.162.208.118,255.255.255.0',
  '216.162.208.121,255.255.255.0',
  '216.162.208.124,255.255.255.0',
  '216.162.208.126,255.255.255.0',
  '216.162.208.129,255.255.255.0',
  '216.162.208.132,255.255.255.0',
  '216.162.208.134,255.255.255.0',
  '216.162.208.137,255.255.255.0',
  '216.162.208.139,255.255.255.0',
  '216.162.208.142,255.255.255.0',
  '216.162.208.145,255.255.255.0',
  '216.162.208.147,255.255.255.0',
  '216.162.208.149,255.255.255.0',
  '216.162.208.151,255.255.255.0',
  '216.162.208.153,255.255.255.0',
  '216.162.208.156,255.255.255.0',
  '216.162.208.158,255.255.255.0',
  '69.87.208.100,255.255.248.0',
  '69.87.208.102,255.255.248.0',
  '69.87.208.104,255.255.248.0',
  '69.87.208.106,255.255.248.0',
  '69.87.208.108,255.255.248.0',
  '69.87.208.111,255.255.248.0',
  '69.87.208.66,255.255.248.0',
  '69.87.208.69,255.255.248.0',
  '69.87.208.71,255.255.248.0',
  '69.87.208.73,255.255.248.0',
  '69.87.208.76,255.255.248.0',
  '69.87.208.79,255.255.248.0',
  '69.87.208.82,255.255.248.0',
  '69.87.208.84,255.255.248.0',
  '69.87.208.87,255.255.248.0',
  '69.87.208.89,255.255.248.0',
  '69.87.208.92,255.255.248.0',
  '69.87.208.95,255.255.248.0',
  '69.87.208.97,255.255.248.0',
  '69.87.209.113,255.255.248.0',
  '69.87.209.116,255.255.248.0',
  '69.87.209.118,255.255.248.0',
  '69.87.209.121,255.255.248.0',
  '69.87.209.124,255.255.248.0',
  '69.87.209.126,255.255.248.0',
  '69.87.209.129,255.255.248.0',
  '69.87.209.132,255.255.248.0',
  '69.87.209.134,255.255.248.0',
  '69.87.209.137,255.255.248.0',
  '69.87.209.139,255.255.248.0',
  '69.87.209.142,255.255.248.0',
  '69.87.209.145,255.255.248.0',
  '69.87.209.147,255.255.248.0',
  '69.87.209.149,255.255.248.0',
  '69.87.209.151,255.255.248.0',
  '69.87.209.153,255.255.248.0',
  '69.87.209.156,255.255.248.0',
  '69.87.209.158,255.255.248.0',
  '69.87.210.160,255.255.248.0',
  '69.87.210.162,255.255.248.0',
  '69.87.210.165,255.255.248.0',
  '69.87.210.168,255.255.248.0',
  '69.87.210.171,255.255.248.0',
  '69.87.210.173,255.255.248.0',
  '69.87.210.176,255.255.248.0',
  '69.87.210.179,255.255.248.0',
  '69.87.210.181,255.255.248.0',
  '69.87.210.183,255.255.248.0',
  '69.87.210.186,255.255.248.0',
  '69.87.210.189,255.255.248.0',
  '69.87.210.192,255.255.248.0',
  '69.87.210.194,255.255.248.0',
  '69.87.210.197,255.255.248.0',
  '69.87.210.199,255.255.248.0',
  '69.87.210.201,255.255.248.0',
  '69.87.210.203,255.255.248.0',
  '69.87.210.206,255.255.248.0',
  '69.87.211.209,255.255.248.0',
  '69.87.211.212,255.255.248.0',
  '69.87.211.215,255.255.248.0',
  '69.87.211.218,255.255.248.0',
  '69.87.211.221,255.255.248.0',
  '69.87.211.224,255.255.248.0',
  '69.87.211.226,255.255.248.0',
  '69.87.211.228,255.255.248.0',
  '69.87.211.230,255.255.248.0',
  '69.87.211.233,255.255.248.0',
  '69.87.211.235,255.255.248.0',
  '69.87.211.238,255.255.248.0',
  '69.87.211.240,255.255.248.0',
  '69.87.211.242,255.255.248.0',
  '69.87.211.244,255.255.248.0',
  '69.87.211.246,255.255.248.0',
  '69.87.211.248,255.255.248.0',
  '69.87.211.251,255.255.248.0',
  '69.87.211.253,255.255.248.0',
  '69.87.212.100,255.255.248.0',
  '69.87.212.102,255.255.248.0',
  '69.87.212.104,255.255.248.0',
  '69.87.212.106,255.255.248.0',
  '69.87.212.108,255.255.248.0',
  '69.87.212.111,255.255.248.0',
  '69.87.212.66,255.255.248.0',
  '69.87.212.69,255.255.248.0',
  '69.87.212.71,255.255.248.0',
  '69.87.212.73,255.255.248.0',
  '69.87.212.76,255.255.248.0',
  '69.87.212.79,255.255.248.0',
  '69.87.212.82,255.255.248.0',
  '69.87.212.84,255.255.248.0',
  '69.87.212.87,255.255.248.0',
  '69.87.212.89,255.255.248.0',
  '69.87.212.92,255.255.248.0',
  '69.87.212.95,255.255.248.0',
  '69.87.212.97,255.255.248.0',
  '69.87.213.113,255.255.248.0',
  '69.87.213.116,255.255.248.0',
  '69.87.213.118,255.255.248.0',
  '69.87.213.121,255.255.248.0',
  '69.87.213.124,255.255.248.0',
  '69.87.213.126,255.255.248.0',
  '69.87.213.129,255.255.248.0',
  '69.87.213.132,255.255.248.0',
  '69.87.213.134,255.255.248.0',
  '69.87.213.137,255.255.248.0',
  '69.87.213.139,255.255.248.0',
  '69.87.213.142,255.255.248.0',
  '69.87.213.145,255.255.248.0',
  '69.87.213.147,255.255.248.0',
  '69.87.213.149,255.255.248.0',
  '69.87.213.151,255.255.248.0',
  '69.87.213.153,255.255.248.0',
  '69.87.213.156,255.255.248.0',
  '69.87.213.158,255.255.248.0',
  '69.87.214.160,255.255.248.0',
  '69.87.214.162,255.255.248.0',
  '69.87.214.165,255.255.248.0',
  '69.87.214.168,255.255.248.0',
  '69.87.214.171,255.255.248.0',
  '69.87.214.173,255.255.248.0',
  '69.87.214.176,255.255.248.0',
  '69.87.214.179,255.255.248.0',
  '69.87.214.181,255.255.248.0',
  '69.87.214.183,255.255.248.0',
  '69.87.214.186,255.255.248.0',
  '69.87.214.189,255.255.248.0',
  '69.87.214.192,255.255.248.0',
  '69.87.214.194,255.255.248.0',
  '69.87.214.197,255.255.248.0',
  '69.87.214.199,255.255.248.0',
  '69.87.214.201,255.255.248.0',
  '69.87.214.203,255.255.248.0',
  '69.87.214.206,255.255.248.0',
  '69.87.215.209,255.255.248.0',
  '69.87.215.212,255.255.248.0',
  '69.87.215.215,255.255.248.0',
  '69.87.215.218,255.255.248.0',
  '69.87.215.221,255.255.248.0',
  '69.87.215.224,255.255.248.0',
  '69.87.215.226,255.255.248.0',
  '69.87.215.228,255.255.248.0',
  '69.87.215.230,255.255.248.0',
  '69.87.215.233,255.255.248.0',
  '69.87.215.235,255.255.248.0',
  '69.87.215.238,255.255.248.0',
  '69.87.215.240,255.255.248.0',
  '69.87.215.242,255.255.248.0',
  '69.87.215.244,255.255.248.0',
  '69.87.215.246,255.255.248.0',
  '69.87.215.248,255.255.248.0',
  '69.87.215.251,255.255.248.0',
  '69.87.215.253,255.255.248.0',
];

var MASKS = {
  '255.255.255.252': 30,
  '255.255.255.248': 29,
  '255.255.255.240': 28,
  '255.255.255.224': 27,
  '255.255.255.192': 26,
  '255.255.255.128': 25,
  '255.255.255.0'  : 24,
  '255.255.254.0'  : 23,
  '255.255.252.0'  : 22,
  '255.255.248.0'  : 21,
  '255.255.240.0'  : 20,
  '255.255.224.0'  : 19,
  '255.255.192.0'  : 18,
  '255.255.128.0'  : 17,
  '255.255.0.0'    : 16,
};

var assign = function(ips){
  return ips.map(function(ip){
    var split = ip.split(",");
    var submask = MASKS[split[1]];
    var inet = [split[0],submask].join("/");
    return `SELECT id FROM assign((select id from servers where code = 'internapproxy'),'${inet}');`;
  }).join(' ');
};

exports.up = function(db, callback) {
  db.runSql(assign(DATA),callback);
};

exports.down = function(db, callback) {
  callback();
};
